{"ast":null,"code":"import * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nfunction SidebarContainer_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r2 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function SidebarContainer_div_0_Template_div_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r2);\n      var ctx_r1 = ɵngcc0.ɵɵnextContext();\n      return ctx_r1._onBackdropClicked();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r0.backdropClass);\n  }\n}\n\nvar _c0 = [[[\"ng-sidebar\"], [\"\", \"ng-sidebar\", \"\"]], [[\"\", \"ng-sidebar-content\", \"\"]]];\nvar _c1 = [\"ng-sidebar,[ng-sidebar]\", \"[ng-sidebar-content]\"];\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Inject, Input, Output, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nvar SidebarContainer = function () {\n  function SidebarContainer(_ref, platformId) {\n    this._ref = _ref;\n    this.animate = true;\n    this.allowSidebarBackdropControl = true;\n    this.showBackdrop = false;\n    this.showBackdropChange = new EventEmitter();\n    this.onBackdropClicked = new EventEmitter();\n    this._sidebars = [];\n    this._isBrowser = isPlatformBrowser(platformId);\n  }\n\n  SidebarContainer.prototype.ngAfterContentInit = function () {\n    if (!this._isBrowser) {\n      return;\n    }\n\n    this._onToggle();\n  };\n\n  SidebarContainer.prototype.ngOnChanges = function (changes) {\n    if (!this._isBrowser) {\n      return;\n    }\n\n    if (changes['showBackdrop']) {\n      this.showBackdropChange.emit(changes['showBackdrop'].currentValue);\n    }\n  };\n\n  SidebarContainer.prototype.ngOnDestroy = function () {\n    if (!this._isBrowser) {\n      return;\n    }\n\n    this._unsubscribe();\n  };\n\n  SidebarContainer.prototype._addSidebar = function (sidebar) {\n    this._sidebars.push(sidebar);\n\n    this._subscribe(sidebar);\n  };\n\n  SidebarContainer.prototype._removeSidebar = function (sidebar) {\n    var index = this._sidebars.indexOf(sidebar);\n\n    if (index !== -1) {\n      this._sidebars.splice(index, 1);\n    }\n  };\n\n  SidebarContainer.prototype._getContentStyle = function () {\n    var left = 0,\n        right = 0,\n        top = 0,\n        bottom = 0;\n    var transformStyle = '';\n    var heightStyle = '';\n    var widthStyle = '';\n\n    for (var _i = 0, _a = this._sidebars; _i < _a.length; _i++) {\n      var sidebar = _a[_i];\n\n      if (sidebar._isModeSlide) {\n        if (sidebar.opened) {\n          var transformDir = sidebar._isLeftOrRight ? 'X' : 'Y';\n          var transformAmt = \"\" + (sidebar._isLeftOrTop ? '' : '-') + (sidebar._isLeftOrRight ? sidebar._width : sidebar._height);\n          transformStyle = \"translate\" + transformDir + \"(\" + transformAmt + \"px)\";\n        }\n      }\n\n      if (sidebar._isModePush && sidebar.opened || sidebar.dock) {\n        var paddingAmt = 0;\n\n        if (sidebar._isModeSlide && sidebar.opened) {\n          if (sidebar._isLeftOrRight) {\n            widthStyle = '100%';\n          } else {\n            heightStyle = '100%';\n          }\n        } else {\n          if (sidebar._isDocked || sidebar._isModeOver && sidebar.dock) {\n            paddingAmt = sidebar._dockedSize;\n          } else {\n            paddingAmt = sidebar._isLeftOrRight ? sidebar._width : sidebar._height;\n          }\n        }\n\n        switch (sidebar.position) {\n          case 'left':\n            left = Math.max(left, paddingAmt);\n            break;\n\n          case 'right':\n            right = Math.max(right, paddingAmt);\n            break;\n\n          case 'top':\n            top = Math.max(top, paddingAmt);\n            break;\n\n          case 'bottom':\n            bottom = Math.max(bottom, paddingAmt);\n            break;\n        }\n      }\n    }\n\n    return {\n      padding: top + \"px \" + right + \"px \" + bottom + \"px \" + left + \"px\",\n      webkitTransform: transformStyle,\n      transform: transformStyle,\n      height: heightStyle,\n      width: widthStyle\n    };\n  };\n\n  SidebarContainer.prototype._onBackdropClicked = function () {\n    var backdropClicked = false;\n\n    for (var _i = 0, _a = this._sidebars; _i < _a.length; _i++) {\n      var sidebar = _a[_i];\n\n      if (sidebar.opened && sidebar.showBackdrop && sidebar.closeOnClickBackdrop) {\n        sidebar.close();\n        backdropClicked = true;\n      }\n    }\n\n    if (backdropClicked) {\n      this.onBackdropClicked.emit();\n    }\n  };\n\n  SidebarContainer.prototype._subscribe = function (sidebar) {\n    var _this = this;\n\n    sidebar.onOpenStart.subscribe(function () {\n      return _this._onToggle();\n    });\n    sidebar.onOpened.subscribe(function () {\n      return _this._markForCheck();\n    });\n    sidebar.onCloseStart.subscribe(function () {\n      return _this._onToggle();\n    });\n    sidebar.onClosed.subscribe(function () {\n      return _this._markForCheck();\n    });\n    sidebar.onModeChange.subscribe(function () {\n      return _this._markForCheck();\n    });\n    sidebar.onPositionChange.subscribe(function () {\n      return _this._markForCheck();\n    });\n\n    sidebar._onRerender.subscribe(function () {\n      return _this._markForCheck();\n    });\n  };\n\n  SidebarContainer.prototype._unsubscribe = function () {\n    for (var _i = 0, _a = this._sidebars; _i < _a.length; _i++) {\n      var sidebar = _a[_i];\n      sidebar.onOpenStart.unsubscribe();\n      sidebar.onOpened.unsubscribe();\n      sidebar.onCloseStart.unsubscribe();\n      sidebar.onClosed.unsubscribe();\n      sidebar.onModeChange.unsubscribe();\n      sidebar.onPositionChange.unsubscribe();\n\n      sidebar._onRerender.unsubscribe();\n    }\n  };\n\n  SidebarContainer.prototype._onToggle = function () {\n    var _this = this;\n\n    if (this._sidebars.length > 0 && this.allowSidebarBackdropControl) {\n      var hasOpen = this._sidebars.some(function (sidebar) {\n        return sidebar.opened && sidebar.showBackdrop;\n      });\n\n      this.showBackdrop = hasOpen;\n      this.showBackdropChange.emit(hasOpen);\n    }\n\n    setTimeout(function () {\n      _this._markForCheck();\n    });\n  };\n\n  SidebarContainer.prototype._markForCheck = function () {\n    this._ref.markForCheck();\n  };\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SidebarContainer.prototype, \"animate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SidebarContainer.prototype, \"allowSidebarBackdropControl\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], SidebarContainer.prototype, \"showBackdrop\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", Object)], SidebarContainer.prototype, \"showBackdropChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", Object)], SidebarContainer.prototype, \"onBackdropClicked\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SidebarContainer.prototype, \"contentClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SidebarContainer.prototype, \"backdropClass\", void 0);\n\n  SidebarContainer = __decorate([__param(1, Inject(PLATFORM_ID)), __metadata(\"design:paramtypes\", [ChangeDetectorRef, Object])], SidebarContainer);\n\n  SidebarContainer.ɵfac = function SidebarContainer_Factory(t) {\n    return new (t || SidebarContainer)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID));\n  };\n\n  SidebarContainer.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: SidebarContainer,\n    selectors: [[\"ng-sidebar-container\"]],\n    inputs: {\n      animate: \"animate\",\n      allowSidebarBackdropControl: \"allowSidebarBackdropControl\",\n      showBackdrop: \"showBackdrop\",\n      contentClass: \"contentClass\",\n      backdropClass: \"backdropClass\"\n    },\n    outputs: {\n      showBackdropChange: \"showBackdropChange\",\n      onBackdropClicked: \"onBackdropClicked\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c1,\n    decls: 4,\n    vars: 5,\n    consts: [[\"aria-hidden\", \"true\", \"class\", \"ng-sidebar__backdrop\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"ng-sidebar__content\", 3, \"ngClass\", \"ngStyle\"], [\"aria-hidden\", \"true\", 1, \"ng-sidebar__backdrop\", 3, \"ngClass\", \"click\"]],\n    template: function SidebarContainer_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c0);\n        ɵngcc0.ɵɵtemplate(0, SidebarContainer_div_0_Template, 1, 1, \"div\", 0);\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵprojection(3, 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showBackdrop);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassProp(\"ng-sidebar__content--animate\", ctx.animate);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.contentClass)(\"ngStyle\", ctx._getContentStyle());\n      }\n    },\n    directives: [ɵngcc1.NgIf, ɵngcc1.NgClass, ɵngcc1.NgStyle],\n    styles: [\"[_nghost-%COMP%] {\\n      box-sizing: border-box;\\n      display: block;\\n      position: relative;\\n      height: 100%;\\n      width: 100%;\\n      overflow: hidden;\\n    }\\n\\n    .ng-sidebar__backdrop[_ngcontent-%COMP%] {\\n      position: absolute;\\n      top: 0;\\n      bottom: 0;\\n      left: 0;\\n      right: 0;\\n      background: #000;\\n      opacity: 0.75;\\n      pointer-events: auto;\\n      z-index: 1;\\n    }\\n\\n    .ng-sidebar__content[_ngcontent-%COMP%] {\\n      -webkit-overflow-scrolling: touch;\\n      overflow: auto;\\n      position: absolute;\\n      top: 0;\\n      bottom: 0;\\n      left: 0;\\n      right: 0;\\n    }\\n\\n    .ng-sidebar__content--animate[_ngcontent-%COMP%] {\\n      -webkit-transition: -webkit-transform 0.3s cubic-bezier(0, 0, 0.3, 1), padding 0.3s cubic-bezier(0, 0, 0.3, 1);\\n      transition: transform 0.3s cubic-bezier(0, 0, 0.3, 1), padding 0.3s cubic-bezier(0, 0, 0.3, 1);\\n    }\"],\n    changeDetection: 0\n  });\n\n  (function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n  })();\n\n  return SidebarContainer;\n}();\n\nexport { SidebarContainer }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZWJhci1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyJzaWRlYmFyLWNvbnRhaW5lci5jb21wb25lbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBT087QUFDUDtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQXlCO0FBQ3pCO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgX19wYXJhbSA9ICh0aGlzICYmIHRoaXMuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxufTtcbmltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5wdXQsIE91dHB1dCwgUExBVEZPUk1fSUQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbnZhciBTaWRlYmFyQ29udGFpbmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaWRlYmFyQ29udGFpbmVyKF9yZWYsIHBsYXRmb3JtSWQpIHtcbiAgICAgICAgdGhpcy5fcmVmID0gX3JlZjtcbiAgICAgICAgdGhpcy5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hbGxvd1NpZGViYXJCYWNrZHJvcENvbnRyb2wgPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dCYWNrZHJvcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNob3dCYWNrZHJvcENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkJhY2tkcm9wQ2xpY2tlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5fc2lkZWJhcnMgPSBbXTtcbiAgICAgICAgdGhpcy5faXNCcm93c2VyID0gaXNQbGF0Zm9ybUJyb3dzZXIocGxhdGZvcm1JZCk7XG4gICAgfVxuICAgIFNpZGViYXJDb250YWluZXIucHJvdG90eXBlLm5nQWZ0ZXJDb250ZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vblRvZ2dsZSgpO1xuICAgIH07XG4gICAgU2lkZWJhckNvbnRhaW5lci5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQnJvd3Nlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzWydzaG93QmFja2Ryb3AnXSkge1xuICAgICAgICAgICAgdGhpcy5zaG93QmFja2Ryb3BDaGFuZ2UuZW1pdChjaGFuZ2VzWydzaG93QmFja2Ryb3AnXS5jdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWRlYmFyQ29udGFpbmVyLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU2lkZWJhckNvbnRhaW5lci5wcm90b3R5cGUuX2FkZFNpZGViYXIgPSBmdW5jdGlvbiAoc2lkZWJhcikge1xuICAgICAgICB0aGlzLl9zaWRlYmFycy5wdXNoKHNpZGViYXIpO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmUoc2lkZWJhcik7XG4gICAgfTtcbiAgICBTaWRlYmFyQ29udGFpbmVyLnByb3RvdHlwZS5fcmVtb3ZlU2lkZWJhciA9IGZ1bmN0aW9uIChzaWRlYmFyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuX3NpZGViYXJzLmluZGV4T2Yoc2lkZWJhcik7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX3NpZGViYXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZGViYXJDb250YWluZXIucHJvdG90eXBlLl9nZXRDb250ZW50U3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsZWZ0ID0gMCwgcmlnaHQgPSAwLCB0b3AgPSAwLCBib3R0b20gPSAwO1xuICAgICAgICB2YXIgdHJhbnNmb3JtU3R5bGUgPSAnJztcbiAgICAgICAgdmFyIGhlaWdodFN0eWxlID0gJyc7XG4gICAgICAgIHZhciB3aWR0aFN0eWxlID0gJyc7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9zaWRlYmFyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBzaWRlYmFyID0gX2FbX2ldO1xuICAgICAgICAgICAgaWYgKHNpZGViYXIuX2lzTW9kZVNsaWRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNpZGViYXIub3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1EaXIgPSBzaWRlYmFyLl9pc0xlZnRPclJpZ2h0ID8gJ1gnIDogJ1knO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtQW10ID0gXCJcIiArIChzaWRlYmFyLl9pc0xlZnRPclRvcCA/ICcnIDogJy0nKSArIChzaWRlYmFyLl9pc0xlZnRPclJpZ2h0ID8gc2lkZWJhci5fd2lkdGggOiBzaWRlYmFyLl9oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1TdHlsZSA9IFwidHJhbnNsYXRlXCIgKyB0cmFuc2Zvcm1EaXIgKyBcIihcIiArIHRyYW5zZm9ybUFtdCArIFwicHgpXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChzaWRlYmFyLl9pc01vZGVQdXNoICYmIHNpZGViYXIub3BlbmVkKSB8fCBzaWRlYmFyLmRvY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFkZGluZ0FtdCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKHNpZGViYXIuX2lzTW9kZVNsaWRlICYmIHNpZGViYXIub3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlYmFyLl9pc0xlZnRPclJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aFN0eWxlID0gJzEwMCUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0U3R5bGUgPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlYmFyLl9pc0RvY2tlZCB8fCAoc2lkZWJhci5faXNNb2RlT3ZlciAmJiBzaWRlYmFyLmRvY2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nQW10ID0gc2lkZWJhci5fZG9ja2VkU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdBbXQgPSBzaWRlYmFyLl9pc0xlZnRPclJpZ2h0ID8gc2lkZWJhci5fd2lkdGggOiBzaWRlYmFyLl9oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoIChzaWRlYmFyLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgubWF4KGxlZnQsIHBhZGRpbmdBbXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gTWF0aC5tYXgocmlnaHQsIHBhZGRpbmdBbXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLm1heCh0b3AsIHBhZGRpbmdBbXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLm1heChib3R0b20sIHBhZGRpbmdBbXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYWRkaW5nOiB0b3AgKyBcInB4IFwiICsgcmlnaHQgKyBcInB4IFwiICsgYm90dG9tICsgXCJweCBcIiArIGxlZnQgKyBcInB4XCIsXG4gICAgICAgICAgICB3ZWJraXRUcmFuc2Zvcm06IHRyYW5zZm9ybVN0eWxlLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm1TdHlsZSxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0U3R5bGUsXG4gICAgICAgICAgICB3aWR0aDogd2lkdGhTdHlsZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU2lkZWJhckNvbnRhaW5lci5wcm90b3R5cGUuX29uQmFja2Ryb3BDbGlja2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYmFja2Ryb3BDbGlja2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9zaWRlYmFyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBzaWRlYmFyID0gX2FbX2ldO1xuICAgICAgICAgICAgaWYgKHNpZGViYXIub3BlbmVkICYmIHNpZGViYXIuc2hvd0JhY2tkcm9wICYmIHNpZGViYXIuY2xvc2VPbkNsaWNrQmFja2Ryb3ApIHtcbiAgICAgICAgICAgICAgICBzaWRlYmFyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgYmFja2Ryb3BDbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYmFja2Ryb3BDbGlja2VkKSB7XG4gICAgICAgICAgICB0aGlzLm9uQmFja2Ryb3BDbGlja2VkLmVtaXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2lkZWJhckNvbnRhaW5lci5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzaWRlYmFyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHNpZGViYXIub25PcGVuU3RhcnQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9vblRvZ2dsZSgpOyB9KTtcbiAgICAgICAgc2lkZWJhci5vbk9wZW5lZC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX21hcmtGb3JDaGVjaygpOyB9KTtcbiAgICAgICAgc2lkZWJhci5vbkNsb3NlU3RhcnQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9vblRvZ2dsZSgpOyB9KTtcbiAgICAgICAgc2lkZWJhci5vbkNsb3NlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX21hcmtGb3JDaGVjaygpOyB9KTtcbiAgICAgICAgc2lkZWJhci5vbk1vZGVDaGFuZ2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9tYXJrRm9yQ2hlY2soKTsgfSk7XG4gICAgICAgIHNpZGViYXIub25Qb3NpdGlvbkNoYW5nZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX21hcmtGb3JDaGVjaygpOyB9KTtcbiAgICAgICAgc2lkZWJhci5fb25SZXJlbmRlci5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX21hcmtGb3JDaGVjaygpOyB9KTtcbiAgICB9O1xuICAgIFNpZGViYXJDb250YWluZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX3NpZGViYXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHNpZGViYXIgPSBfYVtfaV07XG4gICAgICAgICAgICBzaWRlYmFyLm9uT3BlblN0YXJ0LnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBzaWRlYmFyLm9uT3BlbmVkLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBzaWRlYmFyLm9uQ2xvc2VTdGFydC51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgc2lkZWJhci5vbkNsb3NlZC51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgc2lkZWJhci5vbk1vZGVDaGFuZ2UudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHNpZGViYXIub25Qb3NpdGlvbkNoYW5nZS51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgc2lkZWJhci5fb25SZXJlbmRlci51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWRlYmFyQ29udGFpbmVyLnByb3RvdHlwZS5fb25Ub2dnbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLl9zaWRlYmFycy5sZW5ndGggPiAwICYmIHRoaXMuYWxsb3dTaWRlYmFyQmFja2Ryb3BDb250cm9sKSB7XG4gICAgICAgICAgICB2YXIgaGFzT3BlbiA9IHRoaXMuX3NpZGViYXJzLnNvbWUoZnVuY3Rpb24gKHNpZGViYXIpIHsgcmV0dXJuIHNpZGViYXIub3BlbmVkICYmIHNpZGViYXIuc2hvd0JhY2tkcm9wOyB9KTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhY2tkcm9wID0gaGFzT3BlbjtcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhY2tkcm9wQ2hhbmdlLmVtaXQoaGFzT3Blbik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fbWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2lkZWJhckNvbnRhaW5lci5wcm90b3R5cGUuX21hcmtGb3JDaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIFNpZGViYXJDb250YWluZXIucHJvdG90eXBlLCBcImFuaW1hdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgU2lkZWJhckNvbnRhaW5lci5wcm90b3R5cGUsIFwiYWxsb3dTaWRlYmFyQmFja2Ryb3BDb250cm9sXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIFNpZGViYXJDb250YWluZXIucHJvdG90eXBlLCBcInNob3dCYWNrZHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBTaWRlYmFyQ29udGFpbmVyLnByb3RvdHlwZSwgXCJzaG93QmFja2Ryb3BDaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgU2lkZWJhckNvbnRhaW5lci5wcm90b3R5cGUsIFwib25CYWNrZHJvcENsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBTaWRlYmFyQ29udGFpbmVyLnByb3RvdHlwZSwgXCJjb250ZW50Q2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBTaWRlYmFyQ29udGFpbmVyLnByb3RvdHlwZSwgXCJiYWNrZHJvcENsYXNzXCIsIHZvaWQgMCk7XG4gICAgU2lkZWJhckNvbnRhaW5lciA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduZy1zaWRlYmFyLWNvbnRhaW5lcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiAqbmdJZj1cXFwic2hvd0JhY2tkcm9wXFxcIlxcbiAgICAgIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIlxcbiAgICAgIGNsYXNzPVxcXCJuZy1zaWRlYmFyX19iYWNrZHJvcFxcXCJcXG4gICAgICBbbmdDbGFzc109XFxcImJhY2tkcm9wQ2xhc3NcXFwiXFxuICAgICAgKGNsaWNrKT1cXFwiX29uQmFja2Ryb3BDbGlja2VkKClcXFwiPjwvZGl2PlxcblxcbiAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5nLXNpZGViYXIsW25nLXNpZGViYXJdXFxcIj48L25nLWNvbnRlbnQ+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcIm5nLXNpZGViYXJfX2NvbnRlbnRcXFwiXFxuICAgICAgW2NsYXNzLm5nLXNpZGViYXJfX2NvbnRlbnQtLWFuaW1hdGVdPVxcXCJhbmltYXRlXFxcIlxcbiAgICAgIFtuZ0NsYXNzXT1cXFwiY29udGVudENsYXNzXFxcIlxcbiAgICAgIFtuZ1N0eWxlXT1cXFwiX2dldENvbnRlbnRTdHlsZSgpXFxcIj5cXG4gICAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIltuZy1zaWRlYmFyLWNvbnRlbnRdXFxcIj48L25nLWNvbnRlbnQ+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIlxcbiAgICA6aG9zdCB7XFxuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgICAgaGVpZ2h0OiAxMDAlO1xcbiAgICAgIHdpZHRoOiAxMDAlO1xcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgIH1cXG5cXG4gICAgLm5nLXNpZGViYXJfX2JhY2tkcm9wIHtcXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgICAgdG9wOiAwO1xcbiAgICAgIGJvdHRvbTogMDtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICAgIHJpZ2h0OiAwO1xcbiAgICAgIGJhY2tncm91bmQ6ICMwMDA7XFxuICAgICAgb3BhY2l0eTogMC43NTtcXG4gICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcXG4gICAgICB6LWluZGV4OiAxO1xcbiAgICB9XFxuXFxuICAgIC5uZy1zaWRlYmFyX19jb250ZW50IHtcXG4gICAgICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XFxuICAgICAgb3ZlcmZsb3c6IGF1dG87XFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAgIHRvcDogMDtcXG4gICAgICBib3R0b206IDA7XFxuICAgICAgbGVmdDogMDtcXG4gICAgICByaWdodDogMDtcXG4gICAgfVxcblxcbiAgICAubmctc2lkZWJhcl9fY29udGVudC0tYW5pbWF0ZSB7XFxuICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLCAwLCAwLjMsIDEpLCBwYWRkaW5nIDAuM3MgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMywgMSk7XFxuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMywgMSksIHBhZGRpbmcgMC4zcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4zLCAxKTtcXG4gICAgfVxcbiAgXCJdLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgfSksXG4gICAgICAgIF9fcGFyYW0oMSwgSW5qZWN0KFBMQVRGT1JNX0lEKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBPYmplY3RdKVxuICAgIF0sIFNpZGViYXJDb250YWluZXIpO1xuICAgIHJldHVybiBTaWRlYmFyQ29udGFpbmVyO1xufSgpKTtcbmV4cG9ydCB7IFNpZGViYXJDb250YWluZXIgfTtcbiJdfQ==","map":null,"metadata":{},"sourceType":"module"}